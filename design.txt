== Game core ==
A 2-player card game, players take turns casting spells and attacking with creatures to decrease the opponent's life total to 0.


== Code ==
Card
    Spell
        Source
    InPlay
        Charm
        Damageable
            Treasure
            Unit
            

Card - card object stored in the database
CardW - a wrapper for the card, user in Match. Is used for wrapping cards in: hand, treasures, deck, discard. Can be summoned
UnitW - a wrapper for CardW, displays a unit card
TreasureW - a wapper for CardW, displays a treasure card


Zone - a zone, contains cards
Match:
    []Player:
        Hand(Zone<CardW>)
        Discard(Zone<CardW>)
        Treasures(Zone<TreasureW>)
        []UnitW // units
    LState // lua state
    Config // match configurations


CardMaster - a singleton class, manages all the loaded cards.
Contains 3 methods:
- Load(cName: str, colName: str) - if the card is not loaded into CardMaster, loads the card and adds 1 to it's reference counter. If already loaded, increases reference counter by 1.
- Get(cName: str, colName: str) -

== Notes ==
Cards should have a Play method


== Turn Structure ==
(1) Turn start
- Recharge the player's energy
- Trigger all turn start effects, starting from current player
- Draw a card

(2) Main phase



(3) Turn end
- 


== Lua Functions ==
GetAvailableLanes(card) - returns all the available card lanes for the unit card


== Card types ==

    = Source =
Source are cards that fuel the players' energy.
By casting a source card, a player gets a permanent 1 to their maximum energy reserve.
Players can play only one Source card per turn.



    = Unit =
Units are used for attacking the enemy directly or their treasures.
A unit can be placed by each player on a lane. Only one unit can be on each side of the table. 
If a player would play a unit on a lane, where they already have a unit, the unit is replaced.
A unit has health and attack.
If a unit's health would reach 0, they get destroyed.
Units can attack. If a unit would attack on a lane, where there is a defensive unit, they each deal damage to each other simultaneously.

Example:
    [Forest Shaman]
    cost: 3
    attack: 2
    defence: 3
    text: TODO



    = Charm =
Charms are cards played on lanes to give benefitial/detremental effects.
Only one charm can be played on each of the lanes. If a charm would be played on a lane, the previous charm is destroyed.

Example:
    [Lava Field]
    cost: 3
    text: At the start of each player's turn, this lane deals 1 damage to each unit placed on it.



    = Treasure =
Treasures are cards with special effects. Unlike other cards, a player can have any number of treasures in play.
Treasures have health. If a Treasure's health would reach 0, it gets destroyed.
Treasures can be attacked by units.

Example:
    [Font of Life]
    cost: 5
    text: At the start of your turn, restore 2 life of all your units.



    = Spell =
Spells are cards that have a single effect. After that effect's resolution, they are discarded.

Example:
    [Ground Pound]
    Cost: 2
    Text: Deal 3 damage to target player or unit.



    = Bond =
Bonds are powerful cards that players start the game with already in play.
Bonds can be placed in decks.
Bonds can't be removed.

Example:
    [Perfection]
    text: When you place a Unit, if it has the same attack and health, it gains TODO.


== Card Names ==

Answer Prayers


== Cards ==

    [New Recruit]
Type: Creature
Cost: 1
Attack: 1
Life: 1
Text: 

    [Landslide]
Type: Spell
Cost: TODO 3
Text: Shift all charms to their left.
(Moves all charms on lanes to a lane to their left. TODO The right-most is moved to discard or left-most?)


    [Lich King]
Type: Unit
Cost: 7
Attack: 6
Life: 5
Text: 
    Your opponent can't place units on this lane.


    [Storyteller]
Type: Unit
Cost: 4
Attack: 2
Life: 4
Text: 
    When [Storyteller] enters play, return 2 [Source] cards from your discard to your hand.


    [Faithful Cleric]
Type: Unit
Cost: 1
Attack: 1
Life: 3
Text: 
    {Good}


    [Cleanse the Land]
Type: Charm
Cost: TODO
Text:
    At the beginning of your turn, all non-[Peaseful Peasant] units in this lane are destroyed and replaced with a summoned [Peaseful Peasants] unit.


(Summoned)
    [Peaseful Peasants]
Type: Unit
Attack: 0
Life: 1
Text:
    At the start of your turn, [Peaseful Peasants] gains +1 life.


    [Reward Devotion]
Type: Spell
Cost: 2
Text:
    Discard a [Healing Light] card from your hand and gain 2 energy.


    [TODO]
Type: Bond
Text:
    Whenever you gain life, deal (2/ 2 /4) damage to your opponent.


    [Crazed Engineer]
Type: Unit
Cost: 6
Attack: 6
Life: 5
Text:
    At the start of your turn, randomly {Power Up} (2/ 3 /5) cards in play.


    [Collective Prayer]
Type: Bond
Text: 
    Discard 7 [Healing Light] cards: summon an [Archangel] card into play.


(Summoned)
    [Archangel]
Type: Unit
Attack: 7
Life: 7
Text: 
    At the start of your turn, one of your [Healing Light] cards in your hand turns into a [Lesser Angel] card.
    Your [Lesser Angel] units ignore defending units.


(Summoned)
    [Lesser Angel]
Type: Unit
Attack: 4
Life: 4
Text: 
    At the start of your turn, gain 3 life.


(Summoned)
    [Healing Light]
Type: Spell
Cost: 2
Text: 
    Restore 3 life.


    [Priest of the Archdemon]
Type: Unit
Cost: 2
Attack: 2
Life: 2
Text: 
    {Evil}


    [Looming Shadow]
Type: Unit
Cost: 3
Attack: 2
Life: 5
Text:
    Discard a [Corrupting Darkness] card from your hand: [Looming Shadow] gains +3 attack.


    [Reward Obedience]
Type: Spell
Cost: 2
Text:
    Discard a [Corrupting Darkness] card from your hand and gain 2 energy.


    [Grave Robbing]
Type: Spell
Cost: 5
Text:
    {Evil}
    Burn up to (2/  3  /4) cards in your opponents discard. Draw a card for each burned card.


    [Foul Ideas]
Type: Charm
Cost: TODO
Text:
    At the start of your turn, each player with a unit in this lane summons a [Corrupting Darkness] card into their hand.


(Summoned)
    [Corrupting Darkness]
Type: Spell
Cost: 2
Text: 
    Your opponent loses 2 life.


    [Black Market Merchant]
Type: Unit
Cost: 4
Attack: 1
Life: 2
Text:
    {Good}
    {Evil}
    

    [State Executioner]
Type: Unit
Cost: 5
Attack: 3
Life: 3
Text:
    {Evil}
    Discard 3 [Healing Light] cards from your hand: Destroy the defending creature in this lane.
(The idea is that you are less)


    [Greedy Dragon]
Type: Unit
Cost: 6
Attack: 2
Life: 5
Text:
    {Aggresive}
    Destroy one of your Treasures: Double [Greedy Dragon's] attack.


    [Landlord]
Type: Unit
Cost: 4
Attack: 2
Life: 3
Text:
    When [Landlord] enters play, destroy the opponent's charm on this lane.
    Your opponent can't cast Charms on this lane.


    [Taskmaster]
Type: Unit
Cost: 3
Attack: 3
Life: 2
Text:
    Whenever an opoonent's unit is destroyed, summon a [Coin Pouch] treasure into play.


    [Mechanical Engineer]
Type: Unit
Cost: 5
Attack: 3
Life: 5
Text:
    When [Mechanical Engineer] enters play, {Power Up} all your treasures.


    [Earth Elemental]
Type: Unit
Cost: 4
Attack: 6
Life: 6
Text:
    When [Earth Elemental] enters play, summon (6/ 8 /9) [Throw Rock] cards and shuffle them into your deck.


    [Earthling]
Type: Unit
Cost: 1
Attack: 2
Life: 2
Text:
    When [Earthling] enters play, summon 2 [Throw Rock] cards and shuffle them into your deck.


    [Fire Elemental]
Type: Unit
Cost: 5
Attack: 8
Life: 8
Text:
    {Fast}
    At the start of your turn, [Fire Elementals] attack becomes half of it's attack, and it's life becomes half of it's life. Round down each time.


    [Goblin Provocateurs]
Type: Unit
Cost: 4
Attack: 4
Life: 4
Text:
    All of your enemy units are {Aggresive}.


    [Ice Wall]
Type: Unit
Cost: 3
Attack: 0
Life: 8


    [Heavy Fog]
Type: Charm
Cost: 5
Text:
    Units can't attack on this lane.

    
    [Cursed Totem]
Type: Treasure
Cost: 5
Text:
    At the start of your turn, [Cursed Totem] deals (1/ 1 /3) damage to all units. If your unit dies this way, summon an [Ancient Spirit] into play.


(Summoned)
    [Ancient Spirit]
Type: Unit
Attack: 5
Life: 3
Text:
    {Fast}
    Ingores the defending unit.


(Summoned)
    [Throw Rock]
Type: Spell
Cost: 3
Text:
    Deal 1 damage to target treasure.


(Summoned)
    [Coin Pouch]
Type: Treasure
Life: 1
Text:
    Pay 2 energy: Destroy [Coin Pouch] and draw (0/ 2 /5) cards.


    [Powerstone]
Type: Treasure
Cost: 3
Life: 5
Text:
    Units you control have +2 power.
    At the start of your turn, {Power Down} [Powerstone]. If (0/ 3 /10) is equal to 0, destroy [Powerstone].


    [Remember the old times]
Type: Spell
Cost: 3
Text:
    {Power Up} a card in your discard 3 times.


    [Old Mentor]
Type: Unit
Cost: 2
Attack: 1
Life: 2
Text:
    When [Old Mentor] enters play, {Power Up} a card in your hand.


    [Gain Knowledge]
Type: Spell
Cost: 3
Text:
    Draw (2/ 3 /5) cards.


    [Power Engine]
Type: Bond
Text:
    While (0/ 3 /10) is equal to 10, units you control have +8 attack.


    [Lifegem]
Type: Treasure
Life: 5
Text:
    At the start of your turn, [Lifegem] deals 1 damage to itself, then you gain (1/ 1 /3) life.


    [Shawarma Stand]
Type: Treasure
Life: 5
Text:
    At the start of your turn, all your units gain +1 life.
    When [Shawarma Stand] is destroyed, summon an [Angry Cook] into play.


(Summoned)
    [Angry Cook]
Type: Unit
Attack: 3
Life: 2
Text:
    At the start of your turn, a random unit you control gains +1 life.


    [Doomsday Mechanism]
Type: Treasure
Life: 6
Text:
    At the end of your turn, {Power Up} [Doomsday Mechanism], then it deals (1/ 1 /5) damage to itself.
    When [Doomsday Mechanism] is destroyed, deal (0/ 2 /7) damage to all units and players.


    [Rock Launcher]
Type: Treasure
Cost: 4
Life: 5
Text:
    Discard a [Throw Rock] card: [Rock Launcher] deals (2/ 2 /4) damage to target unit.


    [Rock Smelter]
Type: Treasure
Cost: 3
Life: 5
Text:
    Discard 3 [Throw Rock] cards: gain 1 energy.


    [Rock Grinder]
Type: Treasure
Cost: 2
Life: 5
Text:
    Disard 2 [Throw Rock] cards: target unit gains +4 attack.


    [Risen Dead]
Type: Creature
Cost: 2
Attack: 2
Life: 2
Text: 


    [Repentace]
Type: Bond
Text:
    As long as you have 7 or lower life, TODO

== Keywords ==
{Good} - When you cast a {Good} card, summon a [Healing Light] card into your hand.
{Evil} - When you cast a {Evil} card, summon a [Corrupting Darkness] card into your hand.
{Power Up} - Increment all bracketed numbers in the card.
{Power Down} - Decrement all bracketed numbers in the card.